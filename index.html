<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transition 1</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Indie+Flower">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <!-- <p>helooooo</p> -->

    <section id="section1">
        <h1 class="text">ACCESS DENIED</h1>

    <div id="motto_container">

        <p id="motto_text" class="handwritten-text">
            "If you have the privilege to study,<br>
            study for all those who cannot."
        </p>

        <p id="contd1">Click to Continue >></p>

    </div>

    </section>

    <section id="mySection2">
        <div id="section2">
            <div id="man"></div>
        </div>
    </section>
    

    <!-- ###################################################### JAVESCRIPT ###################################################### -->

    <script src="anime.min.js"></script>
    <script>

        window.alert("Please only use devices with landscaspe orientation for the best expereince. Thank you!");    

        let mode = 2;

        function animation2() {
            motto.style.opacity = 1;
            // bg1.style.backgroundImage = "url('images/grey-book-3.jpg')";
            anime.timeline({
                targets: '#motto_text span',
                easing: 'easeInExpo',
                complete: ()=> {
                    document.getElementById("contd1")
                    anime.timeline({
                        targets: '#contd1',
                        easing: 'easeInExpo'
                    })
                    .add({
                        opacity: [0,1],
                        duration: 1000,
                    })
                    transition1();}
            })
            .add({
                rotate: 0,
                translateX: 0,
                translateY: 0,
                scale: 1,
                opacity: [0,1],
                duration: 3000,
                delay: anime.stagger(100)
            });
            anime.timeline({
                targets: '#section1',
                easing: 'linear',
            })
            .add({
                backgroundImage: ["url('images/grey-book-2.jpg')", "url('images/greyBook3.jpg')"], // try bg image
                duration: 1000
            })
        }

        var trigger = 0;
        const text = document.querySelector('.text');
        const bg1 = document.querySelector('#section1');
        text.innerHTML = text.textContent.replace(/\S/g, "<span>$&</span>")

        document.getElementById("section1").style.display = "none";

        if (mode == 1) {
            document.getElementById("section1").style.display = "block"; 

            const animation = anime.timeline({
            targets: '.text span',
            easing: 'easeInOutExpo',
            // loop: true,
            // complete: function(){
            //     trigger = 1;
            //     console.log(trigger);
            // }
            complete: ()=> {
                if (mode==1)
                 animation2();
            }
        });

        animation.add({
            rotateY: [90,0],
            opacity: [0,1],
            duration: 3500,
            delay: anime.stagger(350)
        })
        .add({
            translateY: [0,-100],
            duration: 3000,
            delay: anime.stagger(150),
            opacity: [1,0],
            scale: [1,0]
        });
        }

        const motto = document.querySelector('#motto_text');
        motto.innerHTML = motto.textContent.replace(/\S/g, "<span>$&</span>")

        anime.timeline({
            targets: '#motto_text span',
            easing: 'easeInExpo',
        })
        .add({
            rotate: function() {
                return anime.random(-360,360)
            },
            translateX: function() {
                return anime.random(-500,500);
            },
            translateY: function() {
                return anime.random(-500,500);
            },
            scale: 0.5,
        });

        // anime.timeline({
        //     targets: '.text span',
        //     easing: 'easeOutExpo',
        // })
        // .add({
        //     translateY: [0,-100],
        // });

        function transition1() {
            document.addEventListener('click', () => {
                anime.timeline({
                    targets: '#motto_text span',
                    easing: 'easeInOutExpo',
                    complete: ()=> {mode = 2; console.log(mode);}
                })
                .add({
                    translateY: -200,
                    opacity: 0,
                    duration: 3000,
                });
                anime.timeline({
                    targets: '#contd1',
                    easing: 'easeInOutExpo',
                })
                .add({
                    // translateY: 200,
                    opacity: 0,
                    duration: 3000,
                });
                anime.timeline({
                    targets: '#section1',
                    easing: 'easeInOutExpo',
                })
                .add({
                    translateY: -1000,
                    // display: "none",
                    // opacity: 0,
                    duration: 3000,
                });
            });
        }

        function walkingMan() {
            document.getElementById("section1").style.display = "none";
            const man = document.getElementById("man");

            console.log("I am here"); 

            // anime.timeline({
            //     targets: '#man',
            //     easing: 'easeInExpo',
            // })
            // .add({
            //     translateX: [0, 1000],
            //     duration: 5000,
            // });

            anime.timeline({
                    targets: '#section2',
                    easing: 'linear',
                })
                .add({
                    // translateX: 500,
                    left: '50%',
                    // display: "none",
                    // opacity: 0,
                    duration: 5000,
                });

            document.getElementById("man").style.animation = "walk 0.8s steps(12) forwards 6.5";
            // document.getElementById("section2").style.animation = "forward2 forwards 5s linear";


        }

        // let height = () => {window.innerHeight} ;
        let height, width;

        (function () {
            height = window.innerHeight;
            width = window.innerWidth;
            console.log(height);
        }) ();

        if (mode == 2) {
            console.log("In mode 2");
            let section2 = document.getElementById('mySection2');
            const road = document.createElement('div');
            road.classList.add("roadStyle");
            section2.appendChild(road);
            let roadStyle = document.querySelector(".roadStyle");
            // let roadH = 0.8*height;
            // roadStyle.style.height = window.innerHeight + "px";
            // roadStyle.style.width = height/2360*1640 + "px";
            roadStyle.style.height = "100%";
            roadStyle.style.width = height/2360*1640 + "px";
            walkingMan();  
            console.log(mode);
        }

        

    </script>
<!-- <script src="motto.js"></script> -->
</body>
</html>